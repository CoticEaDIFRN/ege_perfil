{% extends "ege_theme/base.html" %}
{% load i18n static %}

{% block title %}Perfil{% endblock %}

{% block page-title %}
    <a href="{% url 'admin:index' %}">Perfil de {{ ege.user.presentation_name|safe }}</a>
{% endblock %}

{% block left_menu %}{% endblock %}

{% block content %}
    <div id="perfil" data-content="{{ ege.user }}">
        <v-app id="inspire">
            <v-content style="padding:0">
              <v-container fluid fill-height style="padding:0">
                <v-layout align-center justify-center column>
                  <v-flex d-flex align-center style="flex-direction:column">
                    <img
                      :src="photo_user"
                      class="elevation-6"
                      style="background-color:#fff; z-index:1; position:relative; width: 15%; top: 5em; border-radius:50%; flex:0 !important"
                    >
                    <v-card class="elevation-12" style="max-width:85%;width:50em;border-top:2px solid LightGray">
                      <v-card-title primary-title class="mt-5">
                        <div style="width:100%">
                          <h3 dark class="headline mb-0 m-4">{{ege.user.presentation_name}}</h3>
                          <div class="d-flex flex-column flex-md-row align-baseline align-md-center justify-content-around mt-3 text-left text-md-center ml-3 ml-md-0">
                            <div>
                              <h5>Matrícula</h5>
                              <p>0000.0000.000-00</p>
                            </div>
                            <div v-if="{{ege.user.polo}} != null">
                              <h5>Pólo</h5>
                              <p>{{ege.user.polo}}</p>
                            </div>
                            <div v-if="{{ege.user.campus}} != null">
                              <h5>Campus</h5>
                              <p>{{ege.user.campus}}</p>
                            </div>
                          </div>
                        </div>

                        <v-divider style="margin:0 25px"></v-divider>

                        <div style="width:100%">
                          <div class="d-flex row align-center m-3">
                            <div class="text-justify">
                                <v-layout align-center justify-space-around>
                                    <h5>Biografia</h5>
                                    <v-dialog v-model="dialog_bio" persistent max-width="600px">
                                        <v-btn slot="activator" outline fab color="blue" style="width: 2.2em;height: 2.2em">
                                            <v-icon>edit</v-icon>
                                        </v-btn>
                                        <v-card>
                                            <v-card-title>
                                              <span class="headline">Biografia</span>
                                            </v-card-title>
                                            <v-card-text>
                                              <v-container grid-list-md>
                                                <v-layout wrap>
                                                  <v-flex class="">
                                                    <v-textarea
                                                      solo
                                                      full-width
                                                      value="{{ege.user.biografy}}"
                                                      dark
                                                    ></v-textarea>
                                                  </v-flex>
                                                </v-layout>
                                              </v-container>
                                            </v-card-text>
                                            <v-card-actions>
                                              <v-spacer></v-spacer>
                                              <v-btn color="blue darken-1" flat @click="dialog_bio = false">Close</v-btn>
                                              <v-btn color="blue darken-1" flat @click="dialog_bio = false">Save</v-btn>
                                            </v-card-actions>
                                        </v-card>
                                    </v-dialog>
                                </v-layout>
                                <p>{{ege.user.biografy}}</p>
                            </div>
                          </div>
                        </div>

                        <v-divider style="margin:0 25px"></v-divider>

                        <div style="width:100%">
                          <div class="d-flex row align-center justify-space-between m-3">
                            <div class="text-left">
                                <v-layout align-center justify-space-around>
                                    <h5>E-mail</h5>
                                    <v-dialog v-model="dialog_email" persistent max-width="600px">
                                        <v-btn slot="activator" outline fab color="blue" style="width: 2.2em;height: 2.2em">
                                            <v-icon>edit</v-icon>
                                        </v-btn>
                                        <v-card>
                                            <v-card-title>
                                              <span class="headline">Email</span>
                                            </v-card-title>
                                            <v-card-text>
                                              <v-container grid-list-md>
                                                <v-layout wrap>
                                                  <v-flex class="">
                                                    <v-textarea
                                                      solo
                                                      full-width
                                                      value="{{ege.user.personal_email}}"
                                                      dark
                                                    ></v-textarea>
                                                  </v-flex>
                                                </v-layout>
                                              </v-container>
                                            </v-card-text>
                                            <v-card-actions>
                                              <v-spacer></v-spacer>
                                              <v-btn color="blue darken-1" flat @click="dialog_email = false">Close</v-btn>
                                              <v-btn color="blue darken-1" flat @click="dialog_email = false">Save</v-btn>
                                            </v-card-actions>
                                        </v-card>
                                    </v-dialog>
                                </v-layout>
                                <p class="mt-2">{{ege.user.personal_email}}</p>
                            </div>
                            <div class="text-left">
                                <div><p class="mb-0">Exibir para todos</p></div>
                                <v-layout align-center justify-space-around>
                                    <p class="m-0 mr-2">Não</p>
                                    <v-switch v-model="switch_email"></v-switch>
                                    <p class="m-0">Sim</p>
                                </v-layout>
                            </div>
                          </div>
                        </div>

                        <v-divider style="margin:0 25px"></v-divider>

                        <div class="text-right" style="width:100%">
                          <div class="m-3">
                              <div class="d-flex row justify-space-between ">
                                  <div class="text-left ml-3">
                                      <h5 class="mb-3">Necessidades especiais</h5>
                                      <div v-if="`${selected}`" class="d-flex row justify-space-between m-3 mb-4">
                                          <div class="text-left">
                                              <p v-for="sel in selected" class="m-0">${sel}</p>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="text-left" v-if="`${selected}`">
                                    <div><p class="mb-0">Exibir para todos</p></div>
                                    <v-layout align-center justify-space-around>
                                        <p class="m-0 mr-2">Não</p>
                                        <v-switch v-model="switch_needs"></v-switch>
                                        <p class="m-0">Sim</p>
                                    </v-layout>
                                  </div>
                              </div>
                              <div class="d-flex row justify-space-around">
                                  <div class="col-5">
                                      <v-checkbox v-model="selected" v-for="(spneed, index) in special_needs" :label="`${spneed}`" :value="`${spneed}`" v-if="`${index}` < `${special_needs.length/2}`" class="m-0 p-0"></v-checkbox>
                                  </div>
                                  <div class="col-5">
                                      <v-checkbox v-model="selected" v-for="(spneed, index) in special_needs" :label="`${spneed}`" :value="`${spneed}`" v-if="`${index}` >= `${special_needs.length/2}`" class="m-0 p-0"></v-checkbox>
                                  </div>
                              </div>
                          </div>
                          <v-btn round outline fab color="primary" style="width: 5em; height: 2em">SALVAR</v-btn>
                        </div>

                        <v-divider style="margin:0 25px"></v-divider>

                        <div style="width:100%">
                          <div class="d-flex row align-center m-3">
                            <div class="text-left w-100">
                              <h5>Cursos inscritos</h5>
                              <v-card class="mt-2">
                                <v-card-title>
                                  <div style="width:100%">
                                    <p dark>Tecnologia e Desenvolvimento de Software</p>
                                    <div class="d-flex row align-center ml-1">
                                      <div>
                                        <span style="color:grey">0000.0000.000-00</span>
                                      </div>
                                      <div>
                                        <span style="color:grey">Média Final: 9.0</span>
                                      </div>
                                    </div>
                                    <v-progress-linear
                                      v-model="valueDeterminate_1"
                                      color="success"
                                    ></v-progress-linear>
                                  </div>
                                </v-card-title>
                              </v-card>

                              <v-card class="mt-2">
                                <v-card-title>
                                  <div style="width:100%">
                                    <p dark>Gestão Ambiental</p>
                                    <div class="d-flex row align-center ml-1">
                                      <div>
                                        <span style="color:grey">0000.0000.000-00</span>
                                      </div>
                                    </div>
                                    <v-progress-linear
                                      v-model="valueDeterminate_2"
                                      color="warning"
                                    ></v-progress-linear>
                                  </div>
                                </v-card-title>
                              </v-card>
                            </div>
                          </div>
                        </div>
                      </v-card-title>
                    </v-card>
                  </v-flex>

                </v-layout>
              </v-container>
            </v-content>
          </v-app>
    </div>
{% endblock %}

{% block javascript %}
    <script src="{% static 'js/main.js' %}"></script>
{% endblock %}